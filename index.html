<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>给最特别的你</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'PingFang SC', 'Helvetica Neue', Arial, sans-serif;
        }
        
        body {
            background-color: #000;
            color: #fff;
            min-height: 100vh;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
            -webkit-font-smoothing: antialiased;
        }
        
        /* 背景样式 - 已修改为您提供的图片 */
        :root {
            --bg-image: url('https://i.imgs.ovh/2026/01/16/ySm9FU.jpeg');
            --blur-intensity: 3px;
        }
        
        .bg-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background-image: var(--bg-image);
            background-size: cover;
            background-position: center;
            filter: blur(var(--blur-intensity));
            transform: scale(1.05); /* 防止模糊边缘露出 */
        }
        
        .bg-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0);
            z-index: -1;
        }
        
        /* 密码页面样式 */
        .page {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            opacity: 1;
            transition: opacity 0.8s ease;
        }
        
        .page.hidden {
            display: none;
            opacity: 0;
        }
        
        .logo {
            text-align: center;
            margin-bottom: 40px;
            animation: float 3s ease-in-out infinite;
        }
        
        .logo i {
            font-size: 4rem;
            color: #ff7eb9;
            margin-bottom: 15px;
        }
        
        .logo h1 {
            font-size: 2.2rem;
            font-weight: 300;
            letter-spacing: 2px;
            background: linear-gradient(45deg, #ff7eb9, #ff758c);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .password-form {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            width: 100%;
            max-width: 400px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: slideUp 0.8s ease-out;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.9);
        }
        
        .form-input {
            width: 100%;
            padding: 15px 20px;
            border-radius: 50px;
            border: none;
            background: rgba(255, 255, 255, 0.15);
            color: white;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #ff7eb9;
            background: rgba(255, 255, 255, 0.2);
            box-shadow: 0 0 15px rgba(255, 126, 185, 0.3);
        }
        
        .submit-btn {
            width: 100%;
            padding: 16px;
            border-radius: 50px;
            border: none;
            background: linear-gradient(45deg, #ff7eb9, #ff758c);
            color: white;
            font-size: 1.2rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(255, 126, 185, 0.4);
        }
        
        .submit-btn:hover, .submit-btn:active {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 126, 185, 0.6);
        }
        
        .submit-btn:active {
            transform: translateY(-1px);
        }
        
        /* 错误提示样式 */
        .error-tip {
            position: fixed;
            bottom: -80px;
            left: 0;
            width: 100%;
            padding: 15px;
            text-align: center;
            background: rgba(255, 87, 87, 0.9);
            color: white;
            font-size: 1rem;
            z-index: 100;
            transition: bottom 0.5s ease;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }
        
        .error-tip.show {
            bottom: 0;
        }
        
        /* 纪念页面样式 */
        .memory-page {
            padding: 20px;
            padding-top: 60px;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .page-title {
            text-align: center;
            margin-bottom: 40px;
            animation: fadeIn 1s ease-out;
        }
        
        .page-title h2 {
            font-size: 2.5rem;
            font-weight: 300;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #ff7eb9, #ff758c);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .page-title p {
            font-size: 1.1rem;
            opacity: 0.8;
            font-weight: 300;
        }
        
        /* 优化后的时间卡片 */
        .time-card {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border-radius: 25px;
            padding: 35px 30px;
            margin-bottom: 40px;
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.25),
                inset 0 1px 0 rgba(255, 255, 255, 0.1),
                0 0 0 1px rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.12);
            position: relative;
            overflow: hidden;
            animation: fadeInUp 1s ease-out 0.3s both;
        }
        
        .time-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #ff7eb9, #ff758c, #ff7eb9);
            border-radius: 25px 25px 0 0;
        }
        
        .time-card::after {
            content: '';
            position: absolute;
            top: -100px;
            left: -100px;
            width: 200px;
            height: 200px;
            background: radial-gradient(circle, rgba(255, 126, 185, 0.15) 0%, rgba(255, 126, 185, 0) 70%);
            border-radius: 50%;
        }
        
        .time-card h3 {
            font-size: 1.5rem;
            margin-bottom: 25px;
            color: #ff7eb9;
            display: flex;
            align-items: center;
            position: relative;
            z-index: 1;
        }
        
        .time-card h3 i {
            margin-right: 10px;
        }
        
        .time-display-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 30px;
            position: relative;
            z-index: 1;
        }
        
        .time-display {
            font-size: 2.6rem;
            font-weight: 300;
            margin: 10px 0;
            color: #fff;
            text-align: center;
            letter-spacing: 2px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }
        
        .time-display .seconds {
            color: #ff7eb9;
            font-weight: 400;
            animation: pulse 1s infinite;
        }
        
        .time-subtitle {
            font-size: 1rem;
            opacity: 0.7;
            font-weight: 300;
            margin-top: 5px;
            letter-spacing: 1px;
        }
        
        .time-unit-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-top: 20px;
            position: relative;
            z-index: 1;
        }
        
        .unit-card {
            background: rgba(255, 255, 255, 0.07);
            border-radius: 15px;
            padding: 20px 10px;
            text-align: center;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .unit-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.12);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }
        
        .unit-value {
            font-size: 2.2rem;
            font-weight: 600;
            color: #ff7eb9;
            line-height: 1;
            margin-bottom: 5px;
            text-shadow: 0 2px 5px rgba(255, 126, 185, 0.3);
        }
        
        .unit-label {
            font-size: 0.9rem;
            opacity: 0.8;
            letter-spacing: 1px;
        }
        
        /* 时间轴 */
        .timeline-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 40px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: fadeInUp 1s ease-out 0.6s both;
        }
        
        .timeline-container h3 {
            font-size: 1.5rem;
            margin-bottom: 25px;
            color: #ff7eb9;
            display: flex;
            align-items: center;
        }
        
        .timeline-container h3 i {
            margin-right: 10px;
        }
        
        .timeline {
            position: relative;
            padding-left: 30px;
        }
        
        .timeline::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(to bottom, #ff7eb9, #ff758c);
            border-radius: 3px;
        }
        
        .timeline-item {
            position: relative;
            margin-bottom: 40px;
            padding-left: 30px;
            opacity: 0;
            transform: translateX(-20px);
            animation: slideInRight 0.8s ease-out forwards;
        }
        
        .timeline-item:nth-child(1) { animation-delay: 0.9s; }
        .timeline-item:nth-child(2) { animation-delay: 1.2s; }
        .timeline-item:nth-child(3) { animation-delay: 1.5s; }
        .timeline-item:nth-child(4) { animation-delay: 1.8s; }
        
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -36px;
            top: 5px;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: #ff7eb9;
            box-shadow: 0 0 0 3px rgba(255, 126, 185, 0.3);
        }
        
        .timeline-date {
            font-size: 1.1rem;
            color: #ff7eb9;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .timeline-content {
            font-size: 1rem;
            line-height: 1.5;
            margin-bottom: 15px;
            opacity: 0.9;
        }
        
        .timeline-img {
            width: 100%;
            border-radius: 15px;
            overflow: hidden;
            margin-top: 15px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }
        
        .timeline-img img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            display: block;
            transition: transform 0.5s ease;
        }
        
        .timeline-img img:hover {
            transform: scale(1.03);
        }
        
        /* 深情小作文 */
        .love-letter {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 40px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: fadeInUp 1s ease-out 0.9s both;
        }
        
        .love-letter h3 {
            font-size: 1.5rem;
            margin-bottom: 25px;
            color: #ff7eb9;
            display: flex;
            align-items: center;
        }
        
        .love-letter h3 i {
            margin-right: 10px;
        }
        
        .letter-content {
            font-size: 1.1rem;
            line-height: 1.8;
            text-align: justify;
            opacity: 0.9;
        }
        
        .letter-content p {
            margin-bottom: 20px;
        }
        
        .signature {
            text-align: right;
            font-style: italic;
            margin-top: 30px;
            font-size: 1.2rem;
            color: #ff7eb9;
        }
        
        /* 动画定义 */
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideInRight {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        /* iOS Safari 优化 */
        @supports (-webkit-touch-callout: none) {
            .bg-container {
                /* 修复iOS Safari模糊性能问题 */
                -webkit-backdrop-filter: blur(var(--blur-intensity));
                backdrop-filter: blur(var(--blur-intensity));
            }
            
            .password-form, .time-card, .timeline-container, .love-letter {
                /* 优化iOS Safari毛玻璃效果 */
                -webkit-backdrop-filter: saturate(180%) blur(20px);
                backdrop-filter: saturate(180%) blur(20px);
            }
        }
        
        /* 响应式调整 */
        @media (max-width: 768px) {
            .logo h1 {
                font-size: 1.8rem;
            }
            
            .page-title h2 {
                font-size: 2rem;
            }
            
            .time-display {
                font-size: 2rem;
            }
            
            .unit-value {
                font-size: 1.8rem;
            }
            
            .time-unit-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }
            
            .unit-card {
                padding: 15px 5px;
            }
            
            .password-form, .time-card, .timeline-container, .love-letter {
                padding: 25px 20px;
            }
            
            .timeline {
                padding-left: 20px;
            }
            
            .timeline-item {
                padding-left: 25px;
            }
            
            .timeline-item::before {
                left: -28px;
            }
        }
        
        @media (max-width: 480px) {
            .time-display {
                font-size: 1.7rem;
            }
            
            .unit-value {
                font-size: 1.5rem;
            }
            
            .time-unit-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .letter-content {
                font-size: 1rem;
            }
        }
        
        /* 隐藏的音乐控制区域 */
        .hidden-audio-control {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
    </style>
</head>
<body>
    <!-- 背景层 -->
    <div class="bg-container"></div>
    <div class="bg-overlay"></div>
    
    <!-- 密码验证页面 -->
    <div id="passwordPage" class="page">
        <div class="logo">
            <i class="fas fa-heart"></i>
            <h1>给最特别的你</h1>
        </div>
        
        <div class="password-form">
            <div class="form-group">
                <label for="password"><i class="fas fa-lock"></i> 请输入我们的纪念日密码</label>
                <input type="password" id="password" class="form-input" placeholder="格式：YYYYMMDD" autocomplete="off">
            </div>
            <button id="submitBtn" class="submit-btn">
                <i class="fas fa-paper-plane"></i> 进入我们的回忆
            </button>
        </div>
        
        <div id="errorTip" class="error-tip">
            密码不对哦，再想想吧~
        </div>
    </div>
    
    <!-- 纪念页面 -->
    <div id="memoryPage" class="page memory-page hidden">
        <div class="page-title">
            <h2>我们的故事</h2>
            <p>从相遇的那天起，每一天都变得不同</p>
        </div>
        
        <!-- 优化后的时间卡片 -->
        <div class="time-card">
            <h3><i class="far fa-clock"></i> 我们已经相爱</h3>
            <div class="time-display-container">
                <div class="time-display" id="timeDisplay">
                    <span id="daysDisplay">000</span>天 
                    <span id="hoursDisplay">00</span>:<span id="minutesDisplay">00</span>:<span id="secondsDisplay" class="seconds">00</span>
                </div>
                <div class="time-subtitle">每一分每一秒，都是爱的累积</div>
            </div>
            <div class="time-unit-grid">
                <div class="unit-card">
                    <div class="unit-value" id="years">0</div>
                    <div class="unit-label">年</div>
                </div>
                <div class="unit-card">
                    <div class="unit-value" id="months">0</div>
                    <div class="unit-label">月</div>
                </div>
                <div class="unit-card">
                    <div class="unit-value" id="days">0</div>
                    <div class="unit-label">日</div>
                </div>
                <div class="unit-card">
                    <div class="unit-value" id="hours">0</div>
                    <div class="unit-label">时</div>
                </div>
            </div>
        </div>
        
        <!-- 时间轴 -->
        <div class="timeline-container">
            <h3><i class="fas fa-history"></i> 我们的故事</h3>
            <div class="timeline">
                <div class="timeline-item">
                    <div class="timeline-date">2024年5月25日</div>
                    <div class="timeline-content">我们第一次在王者中相遇</div>
                    <div class="timeline-img">
                        <img src="https://i.imgs.ovh/2026/01/16/ySuSdm.jpeg" alt="初次相遇">
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">2024年7月15日</div>
                    <div class="timeline-content">我们从朋友变成了恋人</div>
                    <div class="timeline-img">
                        <img src="https://i.imgs.ovh/2026/01/16/ySuKPH.jpeg" alt="第一次约会">
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">2025年5月3日</div>
                    <div class="timeline-content">我们第一次奔现（第一次做love）</div>
                    <div class="timeline-img">
                        <img src="https://i.imgs.ovh/2026/01/16/ySxFur.jpeg" alt="跨年夜">
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">2025年7月14日</div>
                    <div class="timeline-content">我们第一个一周年</div>
                    <div class="timeline-img">
                        <img src="https://i.imgs.ovh/2026/01/16/ySxMgm.jpeg" alt="特别的日子">
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 深情小作文 -->
        <div class="love-letter">
            <h3><i class="fas fa-heart"></i> To：我最爱的然然</h3>
            <div class="letter-content">
                <p>然然，有你，很幸福，我真的想和你有个家，有个温暖幸福的生活，能够和你相识相爱不容易，能够从朋友变成恋人也不容易，我真的没想到我还能在14岁突破互联网的壁垒去见你几次，所以我格外珍惜，无论我们发生什么争执我都希望与你静心解决，以后无论我们之间发生了什么，都不要轻易放弃彼此，我们之间可能会出现更多甚至更大的矛盾，我们要一起面对，无论你有什么委屈都可以和我讲，我一直都在。我想要身边一直是你不是一阵子，而是一辈子，你不仅是我的恋人，更是爱人，你永远都是我的偏爱，无论发生什么事情你永远都是我的偏爱，我永远都做你的靠山，你是我我今生最美的相遇，也是我这一生仅有的一次执着。每当午夜我静下心来时，我都在想我该如何给你更好的未来，如何才能给你想要的幸福，因为你在我生命中是最重要的女孩，也是我生活中不可或缺的，所以我百倍珍惜，那怕付出再多只要能让你再幸福一点点也罢了，其实我也并不怎么喜欢玩游戏，但在你面前我总是装作很幼稚很喜欢玩游戏的样子，每次和你一起玩游戏的时候都感觉是上帝赐予我的礼物，我在陪你玩游戏的时候能够感觉到温暖和幸福，所以我喜欢的从来不是游戏而是陪你你的每个瞬间。我以前缺少的也从来不是一个能够陪我聊聊天和我打打游戏的朋友，而且一个真正爱我的人。我爱吃醋，占有欲强，敏感多疑，管的事多，见不得你跟别的男生聊天，因为我太怕失去你了，我怕你发现别的男生比我更好而抛弃我，这种事我经历过太多了，以至于我已经被吓的不省人事了，只要你有一丝丝的都会让我联想到一些不好的事情。然然，我大部分时候都在学校，我不在的日子里你要照顾好自己，无论在校还是在家你都要按时吃饭别把胃饿坏了，别挑食，你爱肚子疼别总吃冰棍和凉水，在学校注意身体别把自己累坏了，少抽点烟对身体不好要是能戒了最好，生病了就吃药，别总撑着不吃。遇到你我很幸福，以后的日子我只想与你度过，我爱你然然。</p>              
                <div class="signature">最爱你的男朋友<br>2026年1月16日</div>
            </div>
        </div>
    </div>
    
    <!-- 隐藏的音乐控制区域 -->
    <div class="hidden-audio-control" aria-hidden="true">
        <button id="hiddenAudioBtn">播放音乐</button>
    </div>
    
    <!-- 背景音乐 -->
    <audio id="bgMusic" loop>
        <!-- 使用更浪漫的音乐链接 -->
        <source src="林依晨 - 恶作剧.mp3" type="audio/mpeg">
        您的浏览器不支持音频播放
    </audio>
    
    <script>
        // 密码验证逻辑
        const passwordPage = document.getElementById('passwordPage');
        const memoryPage = document.getElementById('memoryPage');
        const passwordInput = document.getElementById('password');
        const submitBtn = document.getElementById('submitBtn');
        const errorTip = document.getElementById('errorTip');
        const bgMusic = document.getElementById('bgMusic');
        const hiddenAudioBtn = document.getElementById('hiddenAudioBtn');
        
        // 错误提示语数组
        const errorMessages = [
            "密码不对哦，再想想吧~",
            "是不是忘记了重要的日子？",
            "笨蛋，密码是我们在一起的时间"
        ];
        let errorIndex = 0;
        
        // 正确密码
        const correctPassword = "20240715";
        
        // 恋爱开始时间（可以修改为实际开始日期）
        const loveStartDate = new Date("2024-07-15T00:00:00");
        
        // 显示错误提示
        function showErrorTip() {
            errorTip.textContent = errorMessages[errorIndex];
            errorTip.classList.add('show');
            
            // 更新错误索引，循环显示
            errorIndex = (errorIndex + 1) % errorMessages.length;
            
            // 3秒后隐藏错误提示
            setTimeout(() => {
                errorTip.classList.remove('show');
            }, 3000);
        }
        
        // 密码验证函数
        function validatePassword() {
            const inputPassword = passwordInput.value.trim();
            
            if (inputPassword === correctPassword) {
                // 密码正确，切换到纪念页面
                passwordPage.classList.add('hidden');
                memoryPage.classList.remove('hidden');
                
                // 开始播放背景音乐
                playBackgroundMusic();
                
                // 开始更新时间卡片
                updateTimeCard();
                setInterval(updateTimeCard, 1000);
                
                // 添加页面进入动画
                document.querySelector('.page-title').style.animation = 'fadeIn 1s ease-out';
            } else {
                // 密码错误
                showErrorTip();
                passwordInput.value = '';
                passwordInput.focus();
                
                // 添加错误动画效果
                passwordInput.style.animation = 'none';
                setTimeout(() => {
                    passwordInput.style.animation = 'shake 0.5s ease';
                }, 10);
                
                // 定义shake动画
                if (!document.querySelector('#shake-animation')) {
                    const style = document.createElement('style');
                    style.id = 'shake-animation';
                    style.textContent = `
                        @keyframes shake {
                            0%, 100% { transform: translateX(0); }
                            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
                            20%, 40%, 60%, 80% { transform: translateX(5px); }
                        }
                    `;
                    document.head.appendChild(style);
                }
            }
        }
        
        // iOS Safari音频播放处理
        function playBackgroundMusic() {
            // 设置音量
            bgMusic.volume = 0.5;
            
            // iOS Safari需要用户交互才能播放音频
            // 在密码验证通过后，我们已经有了用户交互，所以可以播放
            const playPromise = bgMusic.play();
            
            if (playPromise !== undefined) {
                playPromise.then(() => {
                    console.log("背景音乐播放成功");
                }).catch(error => {
                    console.log("音频自动播放失败，需要用户交互:", error);
                    // 如果自动播放失败，设置一个隐藏按钮让用户点击
                    setTimeout(() => {
                        hiddenAudioBtn.style.display = 'block';
                        // 用户触摸屏幕时尝试播放
                        document.body.addEventListener('touchstart', handleUserInteractionForAudio, { once: true });
                        document.body.addEventListener('click', handleUserInteractionForAudio, { once: true });
                    }, 1000);
                });
            }
        }
        
        // 处理用户交互以播放音频
        function handleUserInteractionForAudio() {
            bgMusic.play().then(() => {
                console.log("通过用户交互播放音乐成功");
            }).catch(e => {
                console.log("用户交互后播放音乐失败:", e);
            });
        }
        
        // 更新时间卡片
        function updateTimeCard() {
            const now = new Date();
            const diff = now - loveStartDate;
            
            // 计算年、月、日、时、分、秒
            const seconds = Math.floor(diff / 1000);
            const minutes = Math.floor(seconds / 60);
            const hours = Math.floor(minutes / 60);
            const days = Math.floor(hours / 24);
            
            // 粗略计算年、月（不考虑闰年和月份天数差异）
            const years = Math.floor(days / 365);
            const months = Math.floor((days % 365) / 30);
            const remainingDays = days % 365 % 30;
            const remainingHours = hours % 24;
            const remainingMinutes = minutes % 60;
            const remainingSeconds = seconds % 60;
            
            // 更新详细时间显示
            document.getElementById('daysDisplay').textContent = days.toString().padStart(3, '0');
            document.getElementById('hoursDisplay').textContent = remainingHours.toString().padStart(2, '0');
            document.getElementById('minutesDisplay').textContent = remainingMinutes.toString().padStart(2, '0');
            document.getElementById('secondsDisplay').textContent = remainingSeconds.toString().padStart(2, '0');
            
            // 更新单位卡片
            document.getElementById('years').textContent = years;
            document.getElementById('months').textContent = months;
            document.getElementById('days').textContent = remainingDays;
            document.getElementById('hours').textContent = remainingHours;
            
            // 秒数跳动效果
            const secondsElement = document.getElementById('secondsDisplay');
            secondsElement.style.transform = 'scale(1.1)';
            setTimeout(() => {
                secondsElement.style.transform = 'scale(1)';
            }, 100);
        }
        
        // 事件监听
        submitBtn.addEventListener('click', validatePassword);
        
        passwordInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                validatePassword();
            }
        });
        
        // 页面加载完成后聚焦密码输入框
        window.addEventListener('load', function() {
            passwordInput.focus();
            
            // 预加载音频，提高播放成功率
            bgMusic.load();
            
            // 添加音频交互处理
            hiddenAudioBtn.addEventListener('click', function() {
                bgMusic.play().then(() => {
                    console.log("通过隐藏按钮播放音乐成功");
                });
            });
        });
        
        // iOS Safari 音频播放兼容处理
        document.addEventListener('touchstart', function() {
            // 触摸事件后尝试播放音频（解决iOS Safari限制）
            if (bgMusic.paused && memoryPage.classList.contains('hidden') === false) {
                bgMusic.play().then(() => {
                    console.log("触摸后播放音乐成功");
                }).catch(() => {
                    // 忽略错误，等待用户点击隐藏按钮
                });
            }
        });
        
        // 初始化时间卡片（在页面切换前）
        updateTimeCard();
        
        // 添加音频状态监听
        bgMusic.addEventListener('play', function() {
            console.log("音乐开始播放");
        });
        
        bgMusic.addEventListener('error', function(e) {
            console.log("音乐播放错误:", e);
        });
    </script>
</body>
</html>
